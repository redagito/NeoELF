<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><script src="BlendELF,%20Tutorial%209,%20Audio-Dateien/analytics.js" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app56.us.archive.org';v.server_ms=1578;archive_analytics.send_pageview({});});</script><script type="text/javascript" src="BlendELF,%20Tutorial%209,%20Audio-Dateien/ait-client-rewrite.js" charset="utf-8"></script>
<script type="text/javascript">
WB_wombat_Init("http://web.archive.org/web/", "20120213051659", "blendelf.com:80");
</script>
<script type="text/javascript" src="BlendELF,%20Tutorial%209,%20Audio-Dateien/wbhack.js" charset="utf-8"></script>
<script type="text/javascript">
__wbhack.init('http://web.archive.org/web');
</script>
<script type="text/javascript" src="BlendELF,%20Tutorial%209,%20Audio-Dateien/playback.js" charset="utf-8"></script>
<link rel="stylesheet" type="text/css" href="BlendELF,%20Tutorial%209,%20Audio-Dateien/banner-styles.css">
<link rel="stylesheet" type="text/css" href="BlendELF,%20Tutorial%209,%20Audio-Dateien/iconochive.css">
<!-- End Wayback Rewrite JS Include -->

<title>BlendELF, Tutorial 9, Audio</title>
<link rel="stylesheet" type="text/css" href="BlendELF,%20Tutorial%209,%20Audio-Dateien/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="BlendELF, Compact and powerful 3D Game Engine">
</head>
<body><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
</style>
<div id="wm-ipp-base" style="display: block; direction: ltr;" lang="en">
</div><div id="donato" style="position:relative;width:100%;">
  <div id="donato-base">
    <iframe id="donato-if" src="BlendELF,%20Tutorial%209,%20Audio-Dateien/donate.html" scrolling="no" style="width:100%; height:100%" frameborder="0">
    </iframe>
  </div>
</div><script type="text/javascript">
__wm.bt(625,27,25,2,"web","http://blendelf.com/tutorial9.html","20120213051659",1996,"/_static/",["/_static/css/banner-styles.css?v=HyR5oymJ","/_static/css/iconochive.css?v=qtvMKcIJ"]);
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

<div class="images">
<img src="BlendELF,%20Tutorial%209,%20Audio-Dateien/topbanner.jpg" alt="BlendELF is a engine written by me, an IT student at the University of Jyväskylä. I am coding the engine as my portfolio project, as a proof of my skills in 3d graphics and game logics/systems coding. I release this engine under the assumption that it could be useful for other people in making quck prototypes and small games. I reserve the right to halt the development of this engine at will, at any given time.">
</div>

<div class="links">
<a href="http://web.archive.org/web/20120213051659/http://blendelf.com/index.html">Home</a> | 
<a href="http://web.archive.org/web/20120213051659/http://forum.blendelf.com/">Forums</a> | 
<a href="http://web.archive.org/web/20120213051659/http://blendelf.com/index.html#Demos">Demos</a> | 
<a href="http://web.archive.org/web/20120213051659/http://blendelf.com/index.html#Features">Features</a> | 
<a href="http://web.archive.org/web/20120213051659/http://blendelf.com/index.html#Devkit">Get Development Kit</a> | 
<a href="http://web.archive.org/web/20120213051659/http://blendelf.com/index.html#Source">Source</a> | 
<a href="http://web.archive.org/web/20120213051659/http://blendelf.com/index.html#Documentation">Documentation</a> | 
<a href="http://web.archive.org/web/20120213051659/http://blendelf.com/index.html#License">License</a> | 
<a href="http://web.archive.org/web/20120213051659/http://blendelf.com/index.html#IRC">IRC</a> | 
<a href="http://web.archive.org/web/20120213051659/http://blendelf.com/index.html#Contact">Contact</a>
</div>

<div class="topic">Tutorial 9, Audio</div>
<div class="info">
This tutorial builds on the first tutorial, so be sure to do that first! <a href="http://web.archive.org/web/20120213051659/http://blendelf.com/tutorial1.html">[Tutorial 1, BlendELF Basics]</a>
<br>
<br>
In this tutorial you will learn to use the BlendELF Audio system</div>


<div class="topic">Step 1: Getting the tutorial resources</div>
<div class="info">
For this tutorial, you will need mono/stereo .ogg files (or .wav if you prefer it). Sample ogg files are provided at: <a href="http://web.archive.org/web/20120213051659/http://blendelf.com/downloads/tutorial9_resources.zip">tutorial9_resources.zip</a>.
<br>
<br>
Extract the sample ogg files <b>track5_stereo.ogg</b> and <b>track5_mono.ogg</b>
 into the folder where your init.lua is. That being said, you can put 
them elsewhere too, but then you will have to adjust the path where they
 are opened from in your <b>init.lua</b> (or any other script for that 
matter) accordingly. In this tutorial, we assume that the files are in 
the same folder as your init.lua.
</div>

<div class="topic">Step 2: Loading and playing audio</div>
<div class="info">
Here is our <b>init.lua</b> from Tutorial 1:
</div>
<div class="codebox">elf.LoadScene("level1.pak")
while elf.Run() == true do
end</div>
<div class="info">
Lets load and play some audio!
</div>
<div class="codebox">elf.LoadScene("level1.pak")

<span class="codered">snd = elf.LoadSound("track5_stereo.ogg")</span>
<span class="codered">elf.PlaySound(snd, 1.0)</span>

while elf.Run() == true do
end</div>
<div class="info">
On the first new line, we load our stereo ogg file. On the next line, we play it. <b>elf.PlaySound</b>
 takes two parameters: the sound to play and the volume. In the upper 
code, we set the volume to the highest possible value, 1.0.
<br>
<br>
Try running the code, if everything went well, you should be hearing some nice music in stereo ;).
</div>

<div class="topic">Step 3: Playing a sound in the 3d environment</div>
<div class="info">
To play an sound in the 3d environment, we need an entity to play it 
from. We know that an entity with the name Cube.002 exists in the 
level1.pak, so lets use it to play the sound. Also to be able to 
demonstrate the effect better, lets add some camera movement from 
Tutorial 3. Our new script will look like this:
</div>
<div class="codebox"><span class="codered">scn = elf.LoadScene("level1.pak")</span>
<span class="codered">elf.HideMouse(true)</span>

snd = elf.LoadSound("<span class="codered">track5_mono.ogg</span>")
<span class="codered">ent = elf.GetEntityByName(scn, "Cube.002")</span>
<span class="codered">elf.PlayEntitySound(ent, snd, 1.0)</span>

while elf.Run() == true do
<span class="codered">    cam = elf.GetSceneActiveCamera(scn)</span>

<span class="codered">    if elf.GetKeyState(elf.KEY_W) == elf.DOWN then</span>
<span class="codered">        elf.MoveActorLocal(cam, 0.0, 0.0, -12.0)</span>
<span class="codered">    end</span>

<span class="codered">    if elf.GetKeyState(elf.KEY_S) == elf.DOWN then</span>
<span class="codered">        elf.MoveActorLocal(cam, 0.0, 0.0, 12.0)</span>
<span class="codered">    end</span>

<span class="codered">    if elf.GetKeyState(elf.KEY_A) == elf.DOWN then</span>
<span class="codered">        elf.MoveActorLocal(cam, -12.0, 0.0, 0.0)</span>
<span class="codered">    end</span>

<span class="codered">    if elf.GetKeyState(elf.KEY_D) == elf.DOWN then</span>
<span class="codered">        elf.MoveActorLocal(cam, 12.0, 0.0, 0.0)</span>
<span class="codered">    end</span>

<span class="codered">    mf = elf.GetMouseForce()</span>
<span class="codered">    elf.RotateActor(cam, 0.0, 0.0, -mf.x*10.0)</span>
<span class="codered">    elf.RotateActorLocal(cam, -mf.y*10.0, 0.0, 0.0)</span>
end</div>
<div class="info">
This time we load the <b>mono</b> version of track5 because <b>stereo</b> sound won't work in the 3d environment. Next we get the entity with <b>elf.GetEntityByName</b> and then instead of calling <b>elf.PlaySound</b> we call <b>elf.PlayEntitySound</b>
 which takes three parameters: the entity that the sound will play from,
 the sound and the volume. Also we hid the mouse so that the camera 
mouse movement will work. You can exit from BlendELF with F10 or Alt + 
F4 even if your mouse can't reach the X control of the window ;).
<br>
<br>
Try the code and move the camera around, you should be hearing some 3d sound from one of the spheres ;).
<br>
<br>
<b>NOTE: 3D SOUNDS HAVE TO BE MONO / 2D SOUNDS HAVE TO BE STEREO</b> Stereo sounds will never be played in 3d and will fall back to 2d playing.
</div>

<div class="topic">Step 4: Controlling the sound</div>
<div class="info">
You will probably want to stop, pause and resume sounds at some point. Fortunately <b>elf.Play/Loop*</b>
 functions return a handle to the audio source so you can do just that. 
Lets make a script which lets you stop a looping sound with space.
</div>
<div class="codebox">elf.LoadScene("level1.pak")

snd = elf.LoadSound("track5_stereo.ogg")
src = elf.LoopSound(snd, 1.0)

while elf.Run() == true do
  if elf.GetKeyState(elf.KEY_SPACE) == elf.PRESSED then
    elf.StopSound(src)
  end
end</div>
<div class="info">
Try the code, space should stop the sound now.
<br>
<br>
Finally, check the API doc for more information of the audio functionality. For example, <b>elf.SetAudioVolume</b> lets you control the global volume of the audio, <b>elf.SetAudioRolloff</b> will let you set the rolloff of 3d audio and with <b>elf.IsSoundPlaying</b> you can check if a sound source is playing or not.
<br>
<br>
Thats it! I hope you enjoyed the tutorial, and if you have any comments about it, please post to the <a href="http://web.archive.org/web/20120213051659/http://forum.blendelf.com/">forums</a>.
</div>

<div class="copyright">Copyright © 2009-2010 Samuel Anjam</div>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "http://web.archive.org/web/20120213051659/https://ssl." : "http://web.archive.org/web/20120213051659/http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="BlendELF,%20Tutorial%209,%20Audio-Dateien/ga.js" type="text/javascript"></script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-4880379-2");
pageTracker._trackPageview();
} catch(err) {}</script>




</body></html>
<!--
     FILE ARCHIVED ON 05:16:59 Feb 13, 2012 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 18:27:13 May 11, 2020.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  RedisCDXSource: 66.602
  captures_list: 816.278
  CDXLines.iter: 12.361 (3)
  LoadShardBlock: 733.183 (3)
  exclusion.robots: 1.297
  PetaboxLoader3.resolve: 263.432 (2)
  load_resource: 753.231
  esindex: 0.015
  exclusion.robots.policy: 0.335
  PetaboxLoader3.datanode: 1208.892 (4)
-->